<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malambing na Valentine Invite ‚ù§Ô∏è</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(145deg, #ffdde1 0%, #f9c9d0 100%);
            font-family: 'Segoe UI', 'Arial', cursive, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* main invitation card */
        .invite-card {
            background: rgba(255, 245, 245, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 48px 48px 32px 32px;
            box-shadow: 0 20px 35px rgba(200, 0, 50, 0.2);
            padding: 40px 30px;
            max-width: 700px;
            width: 100%;
            text-align: center;
            border: 3px solid #ff99aa;
            transition: all 0.3s ease;
            position: relative;
            z-index: 5;
        }

        h1, .title-message {
            color: #b34167;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 3px 3px 0 #ffe3e8;
            letter-spacing: 2px;
            word-break: break-word;
        }

        .box-question {
            background: #fff0f2;
            padding: 30px 20px;
            border-radius: 60px 60px 40px 40px;
            border: 3px dashed #ff6b8b;
            margin: 25px 0;
            box-shadow: inset 0 0 15px #ffb6c1;
        }

        .big-question {
            font-size: 2.8rem;
            font-weight: 800;
            color: #cc1f4b;
            margin-bottom: 20px;
        }

        .button-panel {
            display: flex;
            justify-content: center;
            gap: 30px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 15px;
            position: relative;
        }

        .btn {
            border: none;
            background: #ff4d6d;
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            padding: 18px 40px;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 9px 0 #a1334b, 0 10px 25px #b93b4b;
            transition: all 0.2s ease;
            border: 2px solid #ffe6ec;
            letter-spacing: 3px;
        }

        .btn:hover {
            transform: scale(1.02);
            background: #ff3355;
        }

        .btn-yes {
            background: #ff2a5e;
            box-shadow: 0 7px 0 #951f3a, 0 10px 25px #b33f4a;
        }

        /* NO button ‚Äî stays in panel, just changes size */
        .btn-no {
            background: #5a5a6e;
            box-shadow: 0 7px 0 #353545, 0 10px 20px #4a4a5e;
            padding: 18px 35px;
            font-size: 1.8rem;
            transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* size stages ‚Äî smaller and bigger! */
        .btn-no.size-1 {
            font-size: 1.4rem !important;
            padding: 14px 28px !important;
            box-shadow: 0 6px 0 #353545 !important;
        }

        .btn-no.size-2 {
            font-size: 1.0rem !important;
            padding: 10px 20px !important;
            box-shadow: 0 5px 0 #353545 !important;
        }

        .btn-no.size-3 {
            font-size: 0.7rem !important;
            padding: 7px 14px !important;
            box-shadow: 0 4px 0 #353545 !important;
        }

        /* BIG variant ‚Äî after final reset, it grows */
        .btn-no.big-size {
            font-size: 2.2rem !important;
            padding: 22px 45px !important;
            box-shadow: 0 10px 0 #353545 !important;
        }

        /* hidden celebration area */
        .celebration-area {
            background: rgba(255, 215, 215, 0.9);
            border-radius: 50px;
            padding: 40px 25px;
            margin-top: 20px;
            border: 6px dotted #ff99bb;
            color: #ad1457;
            display: none;
        }

        .celebration-message {
            font-size: 2.5rem;
            font-weight: bold;
            line-height: 1.4;
            animation: pop 1s infinite alternate;
        }

        .small-note {
            font-size: 1.7rem;
            margin-top: 25px;
            color: #d44a6c;
        }

        /* final state: only yes button, big and cute */
        .only-yes-btn {
            background: #fc4a6c !important;
            font-size: 2.8rem !important;
            padding: 25px 70px !important;
            border-radius: 50px !important;
            box-shadow: 0 12px 0 #981f39 !important;
            border: 4px solid white !important;
            transition: all 0.2s;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            100% { transform: scale(1.08); text-shadow: 0 0 10px #ffa5a5; }
        }

        /* heart confetti */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            color: #ff4d6d;
            font-size: 2rem;
            opacity: 0.8;
            animation: fall 4s linear infinite;
        }

        @keyframes fall {
            from { transform: translateY(-100px) rotate(0deg); }
            to { transform: translateY(100vh) rotate(360deg); }
        }

        /* responsive */
        @media (max-width: 550px) {
            .btn { font-size: 1.4rem; padding: 14px 25px; }
            .big-question { font-size: 2.2rem; }
        }
    </style>
</head>
<body>

    <!-- floating confetti container, hidden by default -->
    <div id="confettiContainer" class="confetti" style="display: none;"></div>

    <!-- main invite card -->
    <div id="inviteCard" class="invite-card">
        <div id="titleContainer">
            <h1 id="mainTitle" class="title-message">üíó WOULD YOU BE MY VALENTINE? üíó</h1>
        </div>

        <!-- question box with buttons -->
        <div id="questionBox" class="box-question">
            <div id="dynamicQuestion" class="big-question">üíå will u?</div>
            
            <!-- Button panel: YES and NO (NO stays visible inside panel) -->
            <div id="buttonPanel" class="button-panel">
                <button id="yesButton" class="btn btn-yes">YES üíò</button>
                <button id="noButton" class="btn btn-no">NO üíî</button>
            </div>
        </div>

        <!-- celebration area (hidden until YES is finally clicked) -->
        <div id="celebrationContainer" class="celebration-area">
            <div class="celebration-message">üéâüíñ THANK YOU FOR BEING MY VALENTINES LOVE üíñüéâ</div>
            <div class="small-note">üíï i love you! üíï</div>
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // ---------- state ----------
            let noClickCount = 0;
            const MAX_NO_CLICKS = 3;     // three 'no' clicks ‚Üí final state

            // DOM elements
            const noButton = document.getElementById('noButton');
            const yesButton = document.getElementById('yesButton');
            const inviteCard = document.getElementById('inviteCard');
            const celebrationDiv = document.getElementById('celebrationContainer');
            const questionBoxDiv = document.getElementById('questionBox');
            const buttonPanelDiv = document.getElementById('buttonPanel');
            const mainTitle = document.getElementById('mainTitle');
            const dynamicQuestion = document.getElementById('dynamicQuestion');
            const confettiContainer = document.getElementById('confettiContainer');

            // ---------- size management: no button gets smaller each click, but stays in panel ----------
            function updateNoButtonSize() {
                // remove all existing size classes
                noButton.classList.remove('size-1', 'size-2', 'size-3', 'big-size');
                
                if (noClickCount === 1) {
                    noButton.classList.add('size-1'); // smaller
                } else if (noClickCount === 2) {
                    noButton.classList.add('size-2'); // even smaller
                } else if (noClickCount === 3) {
                    // THIRD CLICK: we go to final state, but we still keep no button visible? 
                    // According to prompt: "on the last prompt i want only one button that only say yes"
                    // So on third click, the NO button will be removed and replaced with only YES.
                    // But you said: "make the 'no' button visible still after it was clicked, 
                    // i just want you to make the button smaller and bigger each clicked"
                    // For the first two clicks it gets smaller. On third click we transition to final state 
                    // where NO disappears and only YES remains ‚Äî that's the "bala ka di ha do" prompt.
                    // So we will NOT apply size-3 on third click because we remove NO.
                    // Instead, for the first two clicks we shrink, and for the third we remove it.
                    // But to make it playful: we could make it BIG before removal? No, we follow the story.
                    // I'll keep it: click1 small, click2 smaller, click3 ‚Üí remove NO, only YES.
                    // However you said "make the button smaller and bigger each clicked" ‚Äì 
                    // I interpret as: first click smaller, second click even smaller, third click maybe bigger? 
                    // But the prompt says on the last prompt only YES button appears. 
                    // To respect both: I'll add a little 'bigger' only if we wanted, but final state is only yes.
                    // To be faithful: third click triggers final state (no button removed). 
                    // So for visibility: first click ‚Üí smaller, second click ‚Üí smaller, third click ‚Üí NO removed.
                }

                // if noClickCount === 0, no special class ‚Üí default size
            }

            // ---------- titles and question based on clicks ----------
            function updatePromptsAndTitles() {
                if (noClickCount === 0) {
                    mainTitle.innerText = 'üíó WOULD YOU BE MY VALENTINE? üíó';
                    dynamicQuestion.innerText = 'üíå will u?';
                } else if (noClickCount === 1) {
                    mainTitle.innerText = 'üò≥ sure na jud? üò≥';
                    dynamicQuestion.innerText = 'sure na jud?';
                } else if (noClickCount === 2) {
                    mainTitle.innerText = 'ü•∫ laina oiii gina ba ü•∫';
                    dynamicQuestion.innerText = 'laina oiii gina ba üíî';
                } else if (noClickCount === 3) {
                    // final state title (before YES celebration)
                    mainTitle.innerText = 'üò§ bala ka di ha do üò§';
                    dynamicQuestion.innerText = 'bala ka di ha do !!!';
                }
            }

            // ---------- final state: only YES button remains, NO button removed ----------
            function goToFinalState() {
                // remove NO button completely (as per last prompt)
                if (noButton && noButton.parentNode) {
                    noButton.remove();
                }

                // transform YES button into huge one
                yesButton.classList.add('only-yes-btn');
                yesButton.innerText = 'YES üíñ';
                
                // ensure YES button is inside panel and normally positioned
                yesButton.style.position = 'relative';
                yesButton.style.left = 'auto';
                yesButton.style.top = 'auto';
                
                // final title is already set by updatePromptsAndTitles
            }

            // ---------- celebration on YES ----------
            function triggerCelebration() {
                // hide question box, show celebration
                questionBoxDiv.style.display = 'none';
                celebrationDiv.style.display = 'block';
                
                // set message
                const msgDiv = celebrationDiv.querySelector('.celebration-message');
                if (msgDiv) {
                    msgDiv.innerText = 'üéâüíñ THANK YOU FOR BEING MY VALENTINES LOVE üíñüéâ';
                }
                
                // start confetti hearts
                confettiContainer.style.display = 'block';
                for (let i = 0; i < 50; i++) {
                    createHeart();
                }

                mainTitle.innerText = 'YAAAY! üíû';
            }

            // ---------- confetti hearts ----------
            function createHeart() {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerText = '‚ù§Ô∏èüß°üíõüíöüíôüíúü§é'[Math.floor(Math.random() * 7)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
                heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                heart.style.opacity = Math.random() * 0.7 + 0.3;
                confettiContainer.appendChild(heart);

                setTimeout(() => {
                    if (heart && heart.parentNode) {
                        heart.remove();
                    }
                }, 5000);
            }

            // ---------- NO button click handler ----------
            function handleNoClick(e) {
                e.preventDefault();
                e.stopPropagation();

                if (noClickCount < MAX_NO_CLICKS) {
                    noClickCount++;
                    
                    // 1. update titles and question
                    updatePromptsAndTitles();
                    
                    // 2. update NO button size (smaller and smaller)
                    //    BUT on third click we remove it, so we apply size only for click 1 & 2
                    if (noClickCount < 3) {
                        updateNoButtonSize();
                    }
                    
                    // 3. if we reached third click -> final state: remove NO, only YES
                    if (noClickCount === 3) {
                        goToFinalState();
                    }
                } else {
                    // just in case, if no button still exists
                    if (noButton && noButton.parentNode) {
                        noButton.remove();
                    }
                }
            }

            // ---------- YES button click handler ----------
            function handleYesClick(e) {
                triggerCelebration();
            }

            // ---------- attach listeners ----------
            noButton.addEventListener('click', handleNoClick);
            yesButton.addEventListener('click', handleYesClick);

            // ---------- initial clean state ----------
            // ensure no stray classes
            noButton.classList.remove('size-1', 'size-2', 'size-3', 'big-size', 'runaway');
            noButton.style.position = 'relative'; // stay in panel
            noButton.style.left = 'auto';
            noButton.style.top = 'auto';
            
            // ensure yes button is inside panel (just in case)
            if (yesButton.parentNode !== buttonPanelDiv) {
                yesButton.remove();
                buttonPanelDiv.appendChild(yesButton);
            }
            if (noButton.parentNode !== buttonPanelDiv) {
                noButton.remove();
                buttonPanelDiv.appendChild(noButton);
            }

            // celebration hidden
            celebrationDiv.style.display = 'none';
            questionBoxDiv.style.display = 'block';

            // initial title
            mainTitle.innerText = 'üíó WOULD YOU BE MY VALENTINE? üíó';
            dynamicQuestion.innerText = 'üíå will u?';

            // ---------- make it even more fun: 
            // On first click: smaller, second click: even smaller, 
            // and we keep NO visible until third click where it vanishes.
            // That's exactly what we did.
            // No moving around, just size changes. Also stays inside panel.
            // I've added smooth transitions for size change.
        })();
    </script>

    <!-- tiny patch to ensure YES is always inside panel if any reparent happens -->
    <script>
        (function ensureYesInPanel() {
            const yes = document.getElementById('yesButton');
            const panel = document.getElementById('buttonPanel');
            if (yes && panel && yes.parentNode !== panel) {
                yes.remove();
                panel.appendChild(yes);
            }
            const no = document.getElementById('noButton');
            if (no && panel && no.parentNode !== panel) {
                no.remove();
                panel.appendChild(no);
            }
        })();
    </script>
</body>
</html>
